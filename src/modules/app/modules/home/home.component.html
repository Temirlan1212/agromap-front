<app-side-panel>
  <app-contour-filter></app-contour-filter>
  <router-outlet></router-outlet>
</app-side-panel>

<div class="map-container">
  <app-map
    (mapData)="handleMapData($event)"
    (mapMove)="handleMapMove($event)"
    (featureClick)="handleFeatureClick($event)"
    (featureClose)="handleFeatureClose()"
  >
    <app-spline-area-chart></app-spline-area-chart>
  </app-map>

  <app-map-controls>
    <div rightPanel>
      <app-map-control-locate
        *ngIf="mapData"
        [map]="mapData.map"
      ></app-map-control-locate>
      <app-map-control-zoom
        *ngIf="mapData"
        [map]="mapData.map"
      ></app-map-control-zoom>
      <app-map-control-layers-switch
        *ngIf="mapData"
        [map]="mapData.map"
      ></app-map-control-layers-switch>
    </div>

    <div topPanel>
      <app-map-control-veg-indexes
        *ngIf="layerFeature && mapData"
        [layer]="layerFeature"
        [mapData]="mapData"
        [vegIndexesData]="vegIndexesData"
        [vegIndexOptionsList]="vegIndexOptionsList"
        (vegIndexOptionClick)="handleVegIndexOptionClick($event)"
        [loading]="loading"
      ></app-map-control-veg-indexes>
    </div>
  </app-map-controls>
</div>
